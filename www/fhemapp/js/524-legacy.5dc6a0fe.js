"use strict";(self["webpackChunkfhemapp"]=self["webpackChunkfhemapp"]||[]).push([[524],{1830:function(t,s,e){e.d(s,{Z:function(){return b}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"text-center"},["zzz"!=t.item.Options.sortby?e("v-chip",{attrs:{small:"",color:"secondary"}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-sort-ascending ")]),t._v(" "+t._s(t.item.Options.sortby)+" ")],1):t._e(),e("v-btn",{attrs:{href:t.toFhem(),target:"_blank",small:"",icon:""}},[e("v-icon",{attrs:{small:""}},[t._v(" mdi-link ")])],1),e("v-dialog",{attrs:{"max-width":"90%",scrollable:""},scopedSlots:t._u([{key:"activator",fn:function(s){var i=s.on,a=s.attrs;return[e("v-btn",t._g(t._b({attrs:{small:"",icon:""}},"v-btn",a,!1),i),[e("v-icon",{attrs:{small:""}},[t._v(" mdi-code-json ")])],1)]}}]),model:{value:t.dialog,callback:function(s){t.dialog=s},expression:"dialog"}},[e("v-card",{staticClass:"secondary lighten-1"},[e("v-card-title",{staticClass:"secondary"},[e("v-btn",{attrs:{icon:""},on:{click:function(s){t.deep=t.deep>1?1:5}}},[e("v-icon",[t._v("mdi-file-tree-outline")])],1),e("v-spacer"),t._v(" "+t._s(t.item.Name)+" "),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(s){t.dialog=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-card-text",[e("div",{ref:"jsonContent",staticClass:"select"},[e("vue-json-pretty",{attrs:{"show-line":!1,deep:t.deep,data:t.item}})],1)])],1)],1)],1)},a=[],n=e(4566),o=e.n(n),l={name:"JsonList",props:{item:{type:Object,default:function(){return{name:"json"}}}},data:function(){return{dialog:!1,deep:1}},components:{VueJsonPretty:o()},methods:{toFhem:function(){var t=this.$fhem.createURL([{param:"detail",value:this.item.Name}]);return t}}},r=l,c=e(1001),h=e(3453),u=e.n(h),m=e(3150),d=e(2371),v=e(7118),p=e(5424),f=e(4497),g=e(6428),_=e(9762),x=(0,c.Z)(r,i,a,!1,null,"4fc9ba56",null),b=x.exports;u()(x,{VBtn:m.Z,VCard:d.Z,VCardText:v.ZB,VCardTitle:v.EB,VChip:p.Z,VDialog:f.Z,VIcon:g.Z,VSpacer:_.Z})},327:function(t,s,e){e.r(s),e.d(s,{default:function(){return k}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-col",{class:t.setup.size},[e("v-card",{attrs:{dark:this.$vuetify.theme.dark,color:"secondary"}},[e("v-progress-linear",{attrs:{height:"7",value:t.getLevel,color:t.vals.status.color,"background-color":"secondary darken-1"}}),e("v-card-title",{staticClass:"text-truncate"},[t._v(" "+t._s(t.vals.title)+" "),e("v-spacer"),t.app.options.debugMode?e("jsonList",{attrs:{item:t.item}}):t._e()],1),e("v-divider"),e("v-card-subtitle",[t._v(" "+t._s(t.vals.subTitle)+" ")]),e("v-card-text",[e("v-row",t._l(t.vals.list,(function(s){return e("v-col",{key:s.name,staticClass:"col-12 col-md-4 col-lg-4"},[e("div",{staticClass:"text-truncate"},[t._v(" "+t._s(s.name)+" ")]),s.isBar?e("v-progress-linear",{attrs:{height:"7",value:s.value,color:s.color,min:s.min,max:s.max,"background-color":"secondary lighten-4"}}):t._e(),e("div",[t._v(t._s(s.subText))])],1)})),1)],1),t.setup.fhemBtns?e("v-card-actions",[e("v-btn",{staticClass:"mr-2",on:{click:function(s){return t.goTo()}}},[e("v-icon",[t._v("mdi-format-list-bulleted")])],1),e("v-spacer"),e("v-btn",{attrs:{disabled:!t.update},on:{click:t.fhemUpdate}},[t._v(" "+t._s(t.updateText)+" ")]),e("v-btn",{attrs:{disabled:!t.restart},on:{click:t.fhemRestart}},[t._v(" "+t._s(t.$t("templates.sysmon.restartBtn"))+" ")])],1):t._e(),e("v-divider"),e("v-system-bar",{attrs:{color:"secondary darken-1"}},[e("v-icon",{staticClass:"ml-0"},[t._v(" "+t._s(t.vals.info.left1Icon)+" ")]),t._v(t._s(t.vals.info.left1Text)+" "),e("v-icon",{staticClass:"ml-2"},[t._v(" "+t._s(t.vals.info.left2Icon)+" ")]),t._v(t._s(t.vals.info.left2Text)+" "),e("v-spacer"),e("v-icon",[t._v(t._s(t.vals.info.mid1Icon))]),t._v(t._s(t.vals.info.mid1Text)+" "),e("v-icon",{staticClass:"ml-2"},[t._v(" "+t._s(t.vals.info.mid2Icon)+" ")]),t._v(t._s(t.vals.info.mid2Text)+" "),e("v-spacer"),e("v-icon",[t._v(t._s(t.vals.info.right1Icon))]),t._v(t._s(t.vals.info.right1Text)+" "),e("v-icon",{staticClass:"ml-2 mr-0"},[t._v(" "+t._s(t.vals.info.right2Icon)+" ")]),t._v(t._s(t.vals.info.right2Text)+" ")],1),e("v-dialog",{attrs:{"max-width":"420px"},model:{value:t.updateDialog,callback:function(s){t.updateDialog=s},expression:"updateDialog"}},[e("v-card",{attrs:{color:"secondary lighten-2"}},[e("v-card-title",[t._v(" "+t._s(t.$t("templates.sysmon.updateDialog.header"))+" "),e("v-spacer"),e("v-btn",{attrs:{icon:"",small:""},on:{click:function(s){t.updateDialog=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-card-text",[t._v(" "+t._s(t.$t("templates.sysmon.updateDialog.text"))+" ")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{on:{click:function(s){return t.fhemRestart()}}},[t._v(" "+t._s(t.$t("templates.sysmon.updateDialog.restartBtn"))+" ")])],1)],1)],1)],1)],1)},a=[],n=e(6198),o=e(2032),l=(e(5666),e(1249),e(8309),e(561),e(1539),e(1830)),r={components:{jsonList:l.Z},props:{item:{type:Object,default:function(){return{name:"sysmon"}}}},data:function(){return{name:"sysmon",app:{options:{updateProcess:!1,debugMode:!1}},setup:{size:"col-12 col-sm-12 col-md-6 col-lg-6",status:{bar:[],error:[],min:0,max:100},subTitle:[],main:[],fhemBtns:!0,info:{left1:[],left2:[],mid1:[],mid2:[],right1:[],right2:[]}},vals:{title:"",subTitle:"",status:{level:0,color:"success"},list:[],info:{left1Icon:"",left1Text:"",left2Icon:"",left2Text:"",mid1Icon:"",mid1Text:"",mid2Icon:"",mid2Text:"",right1Icon:"",right1Text:"",right2Icon:"",right2Text:""}},restart:!0,update:!0,updateText:"",updateDialog:!1}},computed:{getLevel:function(){var t=100/(this.setup.status.max-this.setup.status.min),s=(this.vals.status.level-this.setup.status.min)*t;return this.vals.status.invert?100-s:s}},watch:{item:{immediate:!0,deep:!0,handler:function(t){var s=this.$fhem.getEl(t,"Attributes","alias")||t.Name;this.vals.title=this.$fhem.getEl(t,"Options","name")||s,this.setValues(),this.doList()}},setup:{deep:!0,handler:function(){this.setValues(),this.doList()}},"app.options.updateProcess":function(t){t||(this.updateDialog=!0,this.updateText=this.$t("templates.sysmon.updateBtn[1]"),this.restart=!0)}},mounted:function(){this.app.options=this.$fhem.app.options,this.fhemUpdateCheck();var t=this.$fhem.getEl(this.item,"Options","setup","size"),s=this.$fhem.getEl(this.item,"Options","setup","subTitle"),e=this.$fhem.getEl(this.item,"Options","setup","fhemBtns"),i=this.$fhem.getEl(this.item,"Options","setup","status"),a=this.$fhem.getEl(this.item,"Options","setup","main"),n=this.$fhem.getEl(this.item,"Options","setup","info");t&&(this.setup.size=t),s&&(this.setup.subTitle=s),i&&Object.assign(this.setup.status,i),a&&Object.assign(this.setup.main,a),n&&Object.assign(this.setup.info,n),this.setup.fhemBtns=e},methods:{setValues:function(){var t=this.$fhem.handleVals(this.item,this.setup.status.bar),s=this.$fhem.handleVals(this.item,this.setup.status.error),e=this.$fhem.handleVals(this.item,this.setup.subTitle),i=this.$fhem.handleVals(this.item,this.setup.info.left1),a=this.$fhem.handleVals(this.item,this.setup.info.left2),n=this.$fhem.handleVals(this.item,this.setup.info.mid1),o=this.$fhem.handleVals(this.item,this.setup.info.mid2),l=this.$fhem.handleVals(this.item,this.setup.info.right1),r=this.$fhem.handleVals(this.item,this.setup.info.right2);this.vals.status.level=t[0]||"100",this.vals.status.color=t[1]||"success",this.vals.subTitle=e[0]||"",this.vals.info.left1Icon=i[1]||"",this.vals.info.left1Text=i[0]||"",this.vals.info.left2Icon=a[1]||"",this.vals.info.left2Text=a[0]||"",this.vals.info.mid1Icon=n[1]||"",this.vals.info.mid1Text=n[0]||"",this.vals.info.mid2Icon=o[1]||"",this.vals.info.mid2Text=o[0]||"",this.vals.info.right1Icon=l[1]||"",this.vals.info.right1Text=l[0]||"",this.vals.info.right2Icon=r[1]||"",this.vals.info.right2Text=r[0]||"",s.length>0&&(this.vals.status.level=s[0]||"100",this.vals.status.color=s[1]||"error")},doList:function(){var t,s=(0,o.Z)(this.setup.main);try{for(s.s();!(t=s.n()).done;){var e=t.value,i=this.vals.list.map((function(t){return t.name})).indexOf(e.name),a=this.$fhem.handleVals(this.item,e.bar),n=this.$fhem.handleVals(this.item,e.subText),l={name:e.name,isBar:a.length>0,value:a[0]||0,color:a[1]||"success",min:a[2]||0,max:a[3]||100,subText:n[0]||""};l.isBar&&"success"!=l.color&&(this.vals.status.color=l.color),-1!=i?this.vals.list.splice(i,1,l):this.vals.list.push(l)}}catch(r){s.e(r)}finally{s.f()}},fhemRestart:function(){this.restart=!1,this.updateDialog=!1,this.$fhem.request({param:"cmd",value:"shutdown restart"})},fhemUpdateCheck:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e=new Promise((function(s,e){t.restart=!1,t.update=!1,t.updateText=t.$t("templates.sysmon.updateBtn[0]"),t.$fhem.checkUpdate().then((function(e){e?(t.updateText=t.$t("templates.sysmon.updateBtn[2]"),t.update=!0):t.updateText=t.$t("templates.sysmon.updateBtn[1]"),s(e)})).catch((function(s){t.$fhem.log({lvl:1,msg:"Update check failed.",meta:s}),e()})).finally((function(){t.restart=!0}))})),s.abrupt("return",e);case 2:case"end":return s.stop()}}),s)})))()},fhemUpdate:function(){this.restart=!1,this.update=!1,this.updateText=this.$t("templates.sysmon.updateBtn[3]"),this.app.options.updateProcess=!0,this.$fhem.request({param:"cmd",value:"update"})},goTo:function(){this.$router.push("syslog")}}},c=r,h=e(1001),u=e(3453),m=e.n(u),d=e(3150),v=e(2371),p=e(7118),f=e(2102),g=e(4497),_=e(1418),x=e(6428),b=e(7003),T=e(2877),$=e(9762),V=e(2691),y=(0,h.Z)(c,i,a,!1,null,null,null),k=y.exports;m()(y,{VBtn:d.Z,VCard:v.Z,VCardActions:p.h7,VCardSubtitle:p.Qq,VCardText:p.ZB,VCardTitle:p.EB,VCol:f.Z,VDialog:g.Z,VDivider:_.Z,VIcon:x.Z,VProgressLinear:b.Z,VRow:T.Z,VSpacer:$.Z,VSystemBar:V.Z})}}]);